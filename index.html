<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSIS SMAN 1 PASURUAN</title>
    <!-- CSS Asli Anda -->
    <link rel="stylesheet" href="style.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- CSS Tambahan untuk Animasi Modal -->
    <style>
        /* CSS ini ditambahkan untuk membuat animasi fade-in/out */
        .modal-overlay {
            /* Properti yang diubah untuk transisi */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), visibility 0s linear 0.4s;
        }

        /* Kelas 'show' akan ditambahkan oleh JavaScript untuk menampilkan modal */
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .modal-content {
            /* Animasi skala untuk efek 'pop' */
            transform: scale(0.9);
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Calon Ketua & Wakil Ketua OSIS<br>SMAN 1 Pasuruan 2025/2026</h1>
            <p>Pilih satu pasangan kandidat dengan menekan gambar mereka.</p>
        </header>

        <main id="candidate-list" class="candidate-grid">
            <div class="skeleton-loader"></div>
            <div class="skeleton-loader"></div>
            <div class="skeleton-loader"></div>
        </main>

        <footer>
            <a href="admin.html" class="admin-link">Keluar</a>
            <button id="submit-vote" class="submit-button" disabled>Submit</button>
        </footer>
    </div>
    
    <!-- Modal Konfirmasi -->
    <!-- Atribut style="display: none;" dihapus dari sini -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Selesai memilih?</h2>
            <p>Pastikan pilihan Anda sudah benar sebelum mengirim.</p>
            <div class="modal-actions">
                <button id="edit-choice-btn" class="button-base button-secondary">Edit Pilihan</button>
                <button id="confirm-submit-btn" class="button-base button-primary">Selesai</button>
            </div>
        </div>
    </div> 
    
    <!-- Modal Terima Kasih -->
    <!-- Atribut style="display: none;" dihapus dari sini -->
    <div id="thankyou-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Terima Kasih!</h2>
            <p>Suara sudah dikirim. Silakan tinggalkan bilik suara.</p>
        </div>
    </div>

    <!-- 
        JavaScript untuk mengontrol modal.
        File app.js dan script.js tidak lagi diperlukan untuk halaman ini.
    -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Menemukan elemen-elemen di halaman ---
            const confirmModal = document.getElementById('confirm-modal');
            const thankyouModal = document.getElementById('thankyou-modal');
            const submitVoteBtn = document.getElementById('submit-vote');
            const editChoiceBtn = document.getElementById('edit-choice-btn');
            const confirmSubmitBtn = document.getElementById('confirm-submit-btn');
            const candidateList = document.getElementById('candidate-list');
            let selectedCandidate = null;

            // --- Logika Contoh untuk Pemilihan Kandidat ---
            // Kode ini hanya untuk demonstrasi agar tombol submit bisa berfungsi.
            // Anda bisa menggantinya dengan kode asli dari app.js jika perlu.
            candidateList.innerHTML = ''; // Menghapus skeleton loader
            for (let i = 1; i <= 3; i++) {
                const card = document.createElement('div');
                card.className = 'candidate-card';
                card.dataset.id = i;
                card.innerHTML = `
                    <img src="https://placehold.co/400x400/EFEFEF/333333?text=Kandidat+${i}" alt="Foto Kandidat ${i}" class="candidate-photo" style="object-fit: cover;">
                    <div class="candidate-name">Paslon ${i}</div>
                    <div class="candidate-vision">Ketua & Wakil Ketua</div>
                `;
                candidateList.appendChild(card);
            }
            const candidateCards = document.querySelectorAll('.candidate-card');

            candidateCards.forEach(card => {
                card.addEventListener('click', () => {
                    // Hapus seleksi dari kartu lain dan tambahkan ke yang ini
                    candidateCards.forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    selectedCandidate = card.dataset.id;
                    // Aktifkan tombol submit
                    submitVoteBtn.disabled = false;
                });
            });
            // --- Akhir Logika Contoh ---

            
            // --- Logika untuk Menampilkan dan Menyembunyikan Modal ---
            const showModal = (modal) => {
                modal.classList.add('show');
            };

            const hideModal = (modal) => {
                modal.classList.remove('show');
            };

            // 1. Tampilkan modal konfirmasi saat tombol "Submit" diklik
            submitVoteBtn.addEventListener('click', () => {
                if (!submitVoteBtn.disabled) {
                    showModal(confirmModal);
                }
            });

            // 2. Sembunyikan modal saat tombol "Edit Pilihan" diklik
            editChoiceBtn.addEventListener('click', () => {
                hideModal(confirmModal);
            });
            
            // 3. Sembunyikan juga modal jika area luar (overlay) diklik
            confirmModal.addEventListener('click', (event) => {
                if (event.target === confirmModal) {
                    hideModal(confirmModal);
                }
            });

            // 4. Saat pilihan dikonfirmasi
            confirmSubmitBtn.addEventListener('click', () => {
                // Sembunyikan modal konfirmasi
                hideModal(confirmModal);
                
                // Beri jeda 400ms agar animasi fade-out selesai
                setTimeout(() => {
                    // Tampilkan modal "Terima Kasih"
                    showModal(thankyouModal);
                }, 400);

                // Otomatis sembunyikan modal "Terima Kasih" setelah 3 detik
                setTimeout(() => {
                    hideModal(thankyouModal);
                    // Reset pilihan agar bisa memilih lagi (opsional)
                    candidateCards.forEach(c => c.classList.remove('selected'));
                    submitVoteBtn.disabled = true;
                }, 3000); 
            });
        });
    </script>
</body>
</html>


